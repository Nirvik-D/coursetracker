{% extends 'base.html' %}
{% load mathfilters %}

{% block body %}
    <h1>History</h1>
    <hr>
    <h4 style="text-align: center">{{ start_date }} to {{ end_date }}</h4>
    <hr>

    {% if show_table %}
        <div class="container">
            <div class="row">
                <div class="col-3">{{ courses.name }} ({{ courses.time_spent }} / {{ courses.total_target_hours }} hrs)
                </div>
                <div class="col-9 progress" style="height: 1.8rem">
                    <div class="progress-bar bg-success"
                         style="width:{{ courses.time_spent|div:courses.total_target_hours }}\%;height:1.8rem">
                    </div>
                </div>
            </div>
        </div>
        <br>

        <div class="table-striped table-bordered">
            <table class="table">
                <thead>
                <tr>
                    <th>Start Time</th>
                    <th>Duration</th>
                </tr>
                </thead>
                <tbody>
                {% for interval in intervals %}
                    <tr>
                        <td>{{ interval.start_time }}</td>
                        <td>{{ interval.duration }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        {% for course in courses %} <!-- TODO add more colors -->
            <div class="container">
                <div class="row">
                    <div class="col-3">{{ course.name }} ({{ course.time_spent }} / {{ course.total_target_hours }} hrs)
                    </div>
                    <div class="col-9 progress" style="height: 1.8rem">
                        <div class="progress-bar bg-success"
                             style="width:{{ course.time_spent|div:course.total_target_hours }}\%;height:1.8rem">
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% endif %}
{% endblock %}
